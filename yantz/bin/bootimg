#!/sbin/sh
# puppet13th@xda
# yantz <wnroheryanto@hotmail.com>
#dump current installed kernel
workdir=/tmp/mkboot
dd if=/dev/block/bootdevice/by-name/boot of=$workdir/boot.img
#unpack kernel image
/tmp/mkboot/wrapper $workdir/boot.img $workdir/boot
cp /tmp/kernel/Image.gz $workdir/boot/zImage
cp /tmp/kernel/dtb $workdir/boot/dtb
#repack kernel image
/tmp/mkboot/wrapper $workdir/boot boot-new.img
#flash new kernel image to device
dd if=$workdir/boot/boot-new.img of=/dev/block/bootdevice/by-name/boot
